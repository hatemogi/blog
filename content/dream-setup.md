--- 
title: 내 웹서비스에 사용할 기술 요소들
---

클라우드 컴퓨팅의 정의와 가치에 대해 다양한 견해가 있지만, 개발자에게 와닿는 가장 중요한 가치는 "웹서비스를 초기비용부담 없이 곧바로 만들어서 제공할 수 있다"라는 점입니다. 이전의 환경에서 웹서비스를 만들어 운영하려면, 그에 필요한 인프라를 갖추는 초기비용과 유지비용이 적지 않았지만, 이제는 클라우드 컴퓨팅 환경에 필요한 리소스를 신청하면 곧바로 운영가능하며, 사용한만큼만의 비용을 지불하면 됩니다. 적절한 비유일지 모르겠습니다만, 예전에는 전기를 쓰기위해 값비싼 발전기를 사거나 빌려서 설치하고 가동해야 했지만, 이제는 전력회사에서 제공하는 전기를 쓰고, 사용한만큼의 전기요금을 지불하는 것의 차이랄까요? 

덕분에 개발자는 인프라 구축이나 운영에 대한 큰 비용이나 인력부담을 줄이고 개발에 더욱 집중할 수 있다는 큰 장점이 있습니다. 즉, 조금의 뜻만 품으면 본인이 꿈꾸는 웹서비스를 개발해서 서비스를 제공하는 일이 어렵지 않게 가능한 것입니다.

어떤 웹서비스를 개발해서 오픈한다는 가정 아래, 제 마음대로 어떤 기술들을 선택해 사용할지 고민해봤습니다. 이 선택은 여러가지 안을 비교해 최적안을 낸 것이라기보다는 개인적 선호도에 따른 선택이라 다양한 다른 의견들이 있겠지만, 다른 분들에게도 좋은 참고가 되리라 기대합니다. 

Amazon EC2
----------
아마존(Amazon)이 제공하는 클라우드 컴퓨팅 환경의 핵심이라 할 수 있는 EC2로 필요한 만큼의 서버 인스턴스를 할당받아 운영할 수 있습니다. 아마존에서 제공하는 공식 이미지(AMI) 외에도, 우분투(Ubuntu)에서도 AMI 이미지를 준비해 놓고 있으므로, 선호하는 리눅스 이미지를 이용해 서버 인스턴스를 띄울 수 있습니다. 우분투 최신버전의 서버인스턴스를 설치하겠습니다.

EC2의 장점은 여러가지가 있겠지만, 무엇보다도 완전히 독립적인 서버호스팅환경을 쓸 수 있다는 점입니다. root권한으로 가상 시스템 전부를 활용할 수 있는 형태입니다. 논리적으로는 단독 서버 호스팅과 같은 구조라고 볼 수 있는데요, 중요한 차이점은 서버를 실행한 시간만큼만의 비용을 지불한다는 점입니다. 서비스 오픈전까지는 24시간 서버를 실행할 필요도 없으므로, 개발하는 동안만 실행하고 개발작업을 하지 않는 동안에는 서버를 꺼놓아도 괜찮습니다. (그럼 실행한 시간만큼의 비용을 지불합니다.) 

EC2는 미국(서부&동부), 아일랜드, 싱가폴, 일본(도쿄)에 데이터센터가 있고 선택해 사용합니다. 국내 서비스를 목표로 한다면, 미서부나 일본 영역을 사용하는 것이 네트워크 속도면에서 빠를 것으로 보입니다. 이 때문에, 국내 사용자에게는 너무 느린 서비스가 된다는 단점이 지적되곤 하는데, 간단히 측정해본 바로는 네트워크 패킷 왕복 지연 시간(RTD)은 짧지 않은 편이지만, 쓰루풋(throughput)에는 문제가 없어서, 웹서비스의 목적으로는 무리없이 사용할 수 있다고 판단됩니다. 게다가, 아직 불투명한 상황입니다만, 얼마전 아마존 웹서비스에 대한 세미나를 서울에서 개최한 사실로 보아, 국내에도 아마존의 데이터센터가 생길 수 있지 않을까 추측해봅니다. 

어느정도 수준이상의 트래픽이 유입되면 국내 데이터센터에 직접 서버 코로케이션등을 통해 서비스하는게 나은 순간이 올지도 모르겠습니다만, 그건 조금은 규모가 커진 다음으로 생각을 미뤄도 될것 같습니다. 그런 행복한 고민을 해볼 날이 왔으면 좋겠군요.

참고로, 다른 대안 서비스로는 구글앱엔진(Google App Engine, GAE)도 있습니다. GAE의 경우에는 정해진 앱서비스 포맷이 있습니다. Java/Python/Go 언어를 기준으로 갖춰진 프레임웍을 사용하는 구조이고, 서버의 모든 자원을 자유롭게 사용하는 형태는 아닙니다. 대신 어느정도의 사용량까지는 무료로 사용가능하다는 점이 꽤 매력적입니다. 또, 웹서비스에 특화된 개발/운영환경이 제공되므로, 웹서비스를 만들어 오픈하기에는 더 편할 수도 있습니다. 하지만, 개인적으로는 개발에 사용하고 싶은 프레임웍이나 언어가 다양하므로 저에게는 EC2가 더 매력적입니다.  게다가 GAE는 (현재) SSL을 쓰려면 개인 도메인이 아닌, something.appspot.com로만 쓸 수 있다는 아쉬움이 있네요. (대신 SSL공인 인증서 비용은 들지 않을것 같군요)

Amazon S3
---------
파일 서비스를 위해서는 S3를 이용합니다. 사용자가 HTTP로 내려받을 파일들은 S3에 저장하는 구조로 구성합니다. 트래픽이나 용량에 대한 설계 고민없이 저장해 나가면 되고, 과금은 유지되는 데이터의 크기와 네트워크 트래픽에 대해 발생합니다.

Amazon SimpleDB
---------------
간단한 키-밸류(Key-Value) 저장소로, 하나의 키로 레코드를 기록하고 검색할 수 있습니다. 각각의 레코드는 여러개의 컬럼으로 구성하며, 해당 컬럼은 미리정하지 않아도 필요에 따라 지정해 사용할 수 있습니다. S3와 마찬가지로, 데이타 손실에 대비한 백업이나, 트래픽증가로 인한 스케일링등을 걱정하지 않고도 사용할 수 있어서 마음에 듭니다. 다른 대안으로 직접 운영해 사용한다면 Riak을 적극 고려하겠습니다.

Nginx HTTP server
-----------------
EC2에 설치해 사용할 웹서버는 nginx입니다. 가장 일반적인 선택은 아마도 Apache서버를 이용하는 것이겠지만, 개인적으로는 nginx를 선호합니다. Event-Driven I/O방식으로, 보다 적은 시스템 자원으로도 더 많은 동시 접속자를 감당해 낼 수 있으며, 무엇보다 소스 구조가 작고 간단해서, 직접 모듈을 개발해서 부가적인 처리를 하기도 쉽습니다. 

Sinatra or WebMachine
------------------
기본 애플리케이션 프레임웍을 루비(Ruby)기반으로 갈지, 아니면 얼랭(Erlang)기반으로 갈지에 따라 달라질 부분입니다. 루비를 주력으로 쓴다면 Sinatra가 그 기본 웹프레임웍이 될테구요, 얼랭을 주력으로 삼는다면, WebMachine으로 갈 것 같습니다. 둘다 매력적이기에, 결국은 경우에 따라 둘 다 이용하지 않을까 싶네요.

CoffeeScript + jQuery
-------------------
웹서비스에 필요한 자바스크립트를 위해서는 커피스크립트를 이용해 개발하겠습니다. 자바스크립트를 보다 아름답게 사용할 수 있게해주는 훌륭한 언어이자 툴인 것 같습니다. DOM연산이나 AJAX처리등은 jQuery를 쓰면 되겠습니다. 

Git and Github
------------
소스 버전관리 툴로는 Git을 씁니다. Subversion도 훌륭하지만, 서브버전은 브랜치(branch)관련한 기능이 조금 아쉽습니다. Git에 이르러서야 비로소 브랜치를 사용할만 하다고 할까요? 오픈소스로 진행한다면 Github에 올려서 사용하면 될테구요, 개인개발이라면, 로컬 리파지토리만 쓰고, 해당 디렉토리를 Dropbox에 동기화 시켜서 사용하면, 백업걱정없이 쓸 수 있겠습니다. 만약 팀웍이 필요한 비-오픈소스 프로젝트라면, 로컬 네트워크의 맥미니 서버 한대에 설치해서 메인 리파지터리로 쓰고, 해당 디렉토리를 Dropbox에 걸어서 백업하도록 하겠습니다.

Amazon SQS or Beanstalkd
-----------------------
비동기(asynchronous) 작업을 처리하기위한 메시지 큐 서버로는 AWS에서 제공하는 SQS를 사용하거나, 아니면 별도로 Beanstalkd를 실행해서 이용합니다. SQS가 AWS이의 구성요소의 일부로 지원된다는 점이 마음에 들지만, SQS의 경우 신착 메시지를 얻기 위해서는 HTTP로 접속해서 polling해와야하는 점과 XML을 사용한다는 점이 아쉽습니다. 대신 별도의 관리 부담이 없다는 점이 매력적입니다. 반면 Beanstalkd의 경우 훨씬 가볍고 간단한 메시지큐로, 사용하기에 편리하지만, 직접 서버 띄우고 신경써야한다는 점이 불편할 수 있겠습니다. 좀더 고민해봐야할 부분이지만, 아마도 선택은 Beanstalkd쪽으로 기울지 않을까 합니다. 

Redis
-----------------------
캐시(cache)할 데이터나 크지 않은 규모의 데이터셋은 redis에 넣어서 관리할 수도 있습니다. memcache처럼 빠르고 간단하면서도, 몇가지 매력적인 부가기능들이 있습니다. 이따금 디스크에 저장해 놓을 수도 있어서 좋은 점도 있습니다. 

Nanoc
-----------------------
Static HTML 페이지들도 적잖이 필요할텐데요, nanoc로 만들어내면 아주 편리할 것 같습니다. static 파일로 만들어내면, S3에 그냥 올려서 웹페이지 서비스 할 수도 있고, nginx에서 바로 뿌려줘도 되고, 여러 선택이 나오겠지만, 페이지 생성자체는 nanoc로 결정적입니다. 


결국 더 중요한 것은...
------------------------
이상으로 막연히 생각해보던 서비스 구성요소들을 정리해보았습니다. 바야흐로, 이런 요소들을 활용해서 얼마든지 소규모의 인력과 적은 비용으로 웹서비스를 개발해서 운영할 수 있는 환경이 되었습니다. 하지만, 달라지지 않은 것은 어떤 도구를 사용하든지간에 무엇보다 더 중요한 것은 "사용자에게 좋은 서비스", 그 결과물이 아닐까 생각해봅니다. 어떤 유용한 기술적 요소들을 효과적으로 사용하는 것도 효율성과 흥미의 측면에서 중요하겠지만, "어떤 서비스를 만들 것이냐"에 더 많은 정성을 기울여야 하겠습니다. 

-- 2011/09/02









